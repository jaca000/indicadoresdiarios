<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <title>Monte do Pasto ¬∑ Painel</title>

  <!-- Google Font: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Base palette */
      --bg: #1F2A24;
      --surface: #2E3B34;
      --bar: #18211C;

      /* Text */
      --text: #FFFFFF;
      --text-2: #C7D1CB;
      --text-3: #9FB0A6;

      /* Status */
      --ok: #4CAF50;
      --warn: #FFC107;
      --crit: #E53935;
      --info: #2196F3;

      /* Layout */
      --radius: 16px;
      --shadow: 0 4px 12px rgba(0,0,0,.25);
      --gap: 22px;
      --pad: 26px;

      /* Header/Footer heights */
      --header-h: 120px;
      --footer-h: 120px;
    }

    *{ box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow: hidden; /* TV mode: no scroll */
    }

    /* 1920x1080 friendly container (scales if needed) */
    .screen{
      height: 100vh;
      width: 100vw;
      display: grid;
      grid-template-rows: var(--header-h) 1fr var(--footer-h);
      gap: 0;
    }

    /* HEADER */
    header{
      background: var(--bar);
      display:flex;
      align-items:center;
      justify-content: space-between;
      padding: 16px var(--pad);
      border-bottom: 1px solid rgba(255,255,255,.06);
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 14px;
      min-width: 360px;
    }

    .logo{
      width: 66px;
      height: 66px;
      border-radius: 14px;
      background: rgba(255,255,255,.08);
      display:grid;
      place-items:center;
      font-weight: 700;
      letter-spacing: .5px;
      color: var(--text-2);
      user-select:none;
    }
    .brand-text{
      display:flex;
      flex-direction:column;
      line-height: 1.1;
    }
    .brand-text .name{
      font-size: 22px;
      font-weight: 600;
    }
    .brand-text .sub{
      font-size: 16px;
      color: var(--text-3);
      margin-top: 6px;
    }

    .header-message{
      flex: 1;
      display:flex;
      justify-content:center;
      padding: 0 20px;
      text-align:center;
      font-size: 26px;
      font-weight: 500;
      color: var(--text-2);
      opacity: .95;
    }

    .datetime{
      min-width: 360px;
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      line-height: 1;
    }
    .time{
      font-size: 64px;
      font-weight: 600;
      letter-spacing: -1px;
    }
    .date{
      margin-top: 10px;
      font-size: 22px;
      color: var(--text-2);
      font-weight: 400;
    }

    /* MAIN KPI AREA */
    main{
      padding: var(--pad);
      display:flex;
      flex-direction:column;
      gap: var(--gap);
    }

    .kpi-grid{
      flex: 1;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      grid-auto-rows: 1fr;
      gap: var(--gap);
      min-height: 0;
    }

    .kpi-card{
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px 24px;
      display:flex;
      flex-direction:column;
      position: relative;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.06);
    }

    .kpi-title{
      font-size: 22px;
      font-weight: 600;
      letter-spacing: .3px;
      color: var(--text-2);
      text-transform: uppercase;
    }

    .kpi-value{
      margin-top: 18px;
      font-size: 72px;
      font-weight: 700;
      letter-spacing: -1px;
    }

    .kpi-unit{
      margin-top: 6px;
      font-size: 20px;
      color: var(--text-3);
    }

    .kpi-footer{
      margin-top: auto;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
    }

    .kpi-note{
      font-size: 16px;
      color: var(--text-3);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .status-dot{
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: var(--info);
      box-shadow: 0 0 0 4px rgba(255,255,255,.06);
      flex: 0 0 auto;
    }

    .status-bar{
      position:absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 8px;
      background: var(--info);
      opacity: .9;
    }

    /* Footer / News ticker */
    footer{
      background: var(--bar);
      border-top: 1px solid rgba(255,255,255,.06);
      display:flex;
      align-items:center;
      padding: 0 var(--pad);
    }

    .ticker{
      width: 100%;
      display:flex;
      align-items:center;
      gap: 14px;
      min-height: 100%;
    }

    .ticker-icon{
      font-size: 28px;
      width: 36px;
      text-align:center;
      opacity: .95;
    }

    .ticker-text{
      font-size: 28px;
      font-weight: 500;
      color: var(--text);
      line-height: 1.1;
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .ticker-tag{
      font-size: 16px;
      color: var(--text-3);
      border: 1px solid rgba(255,255,255,.12);
      padding: 8px 10px;
      border-radius: 999px;
      white-space: nowrap;
    }

    /* Subtle fade for rotating text */
    .fade{
      transition: opacity .35s ease-in-out;
      opacity: 1;
    }
    .fade.out{ opacity: 0; }

    /* Responsiveness: keep proportions on smaller screens */
    @media (max-width: 1400px){
      .time{ font-size: 52px; }
      .kpi-value{ font-size: 60px; }
      .ticker-text{ font-size: 22px; }
    }
  </style>
</head>

<body>
  <div class="screen">
    <header>
      <div class="brand">
        <!-- Trocar isto por <img src="logo.png"> quando tiveres o ficheiro -->
        <div class="logo" aria-label="Logo">MP</div>
        <div class="brand-text">
          <div class="name">Monte do Pasto</div>
          <div class="sub">Informa√ß√£o interna ¬∑ Colaboradores</div>
        </div>
      </div>

      <div class="header-message fade" id="headerMessage">Seguran√ßa em primeiro lugar</div>

      <div class="datetime">
        <div class="time" id="time">--:--</div>
        <div class="date" id="date">---</div>
      </div>
    </header>

    <main>
      <section class="kpi-grid" aria-label="Indicadores">
        <!-- KPI 1 -->
        <article class="kpi-card" data-status="ok">
          <div class="kpi-title">Produ√ß√£o hoje</div>
          <div class="kpi-value">1280</div>
          <div class="kpi-unit">kg</div>
          <div class="kpi-footer">
            <div class="kpi-note">Atualizado √†s 10:30</div>
            <div class="status-dot"></div>
          </div>
          <div class="status-bar"></div>
        </article>

        <!-- KPI 2 -->
        <article class="kpi-card" data-status="info">
          <div class="kpi-title">Dias sem incidentes</div>
          <div class="kpi-value">64</div>
          <div class="kpi-unit">dias</div>
          <div class="kpi-footer">
            <div class="kpi-note">√öltimo: h√° 64 dias</div>
            <div class="status-dot"></div>
          </div>
          <div class="status-bar"></div>
        </article>

        <!-- KPI 3 -->
        <article class="kpi-card" data-status="ok">
          <div class="kpi-title">Incidentes (30 dias)</div>
          <div class="kpi-value">0</div>
          <div class="kpi-unit">&nbsp;</div>
          <div class="kpi-footer">
            <div class="kpi-note">Objetivo: 0</div>
            <div class="status-dot"></div>
          </div>
          <div class="status-bar"></div>
        </article>

        <!-- KPI 4 -->
        <article class="kpi-card" data-status="warn">
          <div class="kpi-title">Meta do m√™s</div>
          <div class="kpi-value">82%</div>
          <div class="kpi-unit">progresso</div>
          <div class="kpi-footer">
            <div class="kpi-note">Faltam 18%</div>
            <div class="status-dot"></div>
          </div>
          <div class="status-bar"></div>
        </article>

        <!-- KPI 5 -->
        <article class="kpi-card" data-status="ok">
          <div class="kpi-title">Efici√™ncia</div>
          <div class="kpi-value">94%</div>
          <div class="kpi-unit">m√©dia semanal</div>
          <div class="kpi-footer">
            <div class="kpi-note">Objetivo: 90%</div>
            <div class="status-dot"></div>
          </div>
          <div class="status-bar"></div>
        </article>

        <!-- KPI 6 (opcional) -->
        <article class="kpi-card" data-status="info">
          <div class="kpi-title">Qualidade</div>
          <div class="kpi-value">A+</div>
          <div class="kpi-unit">lote atual</div>
          <div class="kpi-footer">
            <div class="kpi-note">Sem n√£o conformidades</div>
            <div class="status-dot"></div>
          </div>
          <div class="status-bar"></div>
        </article>
      </section>
    </main>

    <footer>
      <div class="ticker">
        <div class="ticker-icon" id="tickerIcon">üîî</div>
        <div class="ticker-text fade" id="tickerText">Manuten√ß√£o programada sexta-feira √†s 14h.</div>
        <div class="ticker-tag" id="tickerTag">NOT√çCIA</div>
      </div>
    </footer>
  </div>

  <script>
    // --- Helpers
    const statusColors = {
      ok: getComputedStyle(document.documentElement).getPropertyValue('--ok').trim(),
      warn: getComputedStyle(document.documentElement).getPropertyValue('--warn').trim(),
      crit: getComputedStyle(document.documentElement).getPropertyValue('--crit').trim(),
      info: getComputedStyle(document.documentElement).getPropertyValue('--info').trim()
    };

    // Apply status color to cards (dot + bar)
    document.querySelectorAll('.kpi-card').forEach(card => {
      const s = card.getAttribute('data-status') || 'info';
      const color = statusColors[s] || statusColors.info;
      card.querySelector('.status-dot').style.background = color;
      card.querySelector('.status-bar').style.background = color;
    });

    // Date/time (Europe/Lisbon)
    const timeEl = document.getElementById('time');
    const dateEl = document.getElementById('date');

    function tickClock(){
      const now = new Date();
      const timeFmt = new Intl.DateTimeFormat('pt-PT', { hour: '2-digit', minute: '2-digit' });
      const dateFmt = new Intl.DateTimeFormat('pt-PT', { weekday: 'short', day: '2-digit', month: 'short' });
      timeEl.textContent = timeFmt.format(now);
      // Capitalizar primeira letra (alguns browsers d√£o "qui.")
      const d = dateFmt.format(now);
      dateEl.textContent = d.charAt(0).toUpperCase() + d.slice(1);
    }
    tickClock();
    setInterval(tickClock, 1000 * 15);

    // Rotating header message
    const headerMessageEl = document.getElementById('headerMessage');
    const headerMessages = [
      "Seguran√ßa em primeiro lugar",
      "Qualidade √© responsabilidade de todos",
      "Bom trabalho, equipa üí™",
      "Comunica√ß√£o clara evita problemas",
      "Orgulho no que fazemos"
    ];
    let headerIdx = 0;

    function rotateHeader(){
      headerMessageEl.classList.add('out');
      setTimeout(() => {
        headerIdx = (headerIdx + 1) % headerMessages.length;
        headerMessageEl.textContent = headerMessages[headerIdx];
        headerMessageEl.classList.remove('out');
      }, 350);
    }
    setInterval(rotateHeader, 1000 * 45);

    // Rotating ticker items
    const tickerIconEl = document.getElementById('tickerIcon');
    const tickerTextEl = document.getElementById('tickerText');
    const tickerTagEl  = document.getElementById('tickerTag');

    const tickerItems = [
      { icon: "üîî", tag: "NOT√çCIA", text: "Manuten√ß√£o programada sexta-feira √†s 14h." },
      { icon: "‚ÑπÔ∏è", tag: "INFO",   text: "Uso obrigat√≥rio de EPI na zona X." },
      { icon: "üì¢", tag: "AVISO",  text: "Reuni√£o geral dia 25 √†s 09:00." },
      { icon: "‚úÖ", tag: "BOAS NOT√çCIAS", text: "0 incidentes nos √∫ltimos 30 dias. Continua assim!" }
    ];
    let tickerIdx = 0;

    function rotateTicker(){
      tickerTextEl.classList.add('out');
      setTimeout(() => {
        tickerIdx = (tickerIdx + 1) % tickerItems.length;
        const item = tickerItems[tickerIdx];
        tickerIconEl.textContent = item.icon;
        tickerTagEl.textContent  = item.tag;
        tickerTextEl.textContent = item.text;
        tickerTextEl.classList.remove('out');
      }, 350);
    }
    setInterval(rotateTicker, 1000 * 10);

    // Auto-refresh safety net (TV stability)
    // Refresh a cada 30 min para evitar "browser drift"
    setTimeout(() => location.reload(), 1000 * 60 * 30);
  </script>
</body>
</html>
